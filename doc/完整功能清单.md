# 高校学术讲座与活动一体化管理系统 - 完整功能清单

## ✅ 已实现功能

### 一、活动发布平台

#### 1.1 多主体申报体系 ✅
- [x] 支持校内部门申报
- [x] 支持校外机构申报
- [x] 支持教师个人申报
- [x] 必填字段校验（主讲人、地点、最大人数、报名截止时间等）
- [x] 活动类型分类（学术讲座、校园活动、竞赛）

#### 1.2 审核发布流程 ✅
- [x] 草稿状态管理
- [x] 待审核状态（校内审核/校外审核）
- [x] 已发布状态
- [x] 已驳回状态（含审核意见）
- [x] 审核通过后自动进入资源池

#### 1.3 资源池检索 ✅
- [x] 按活动类型筛选
- [x] 按时间范围筛选
- [x] 关键字搜索
- [x] 列表展示剩余名额
- [x] 活动状态显示（报名中/已满/已结束）
- [x] 分页查询

#### 1.4 业务规则校验 ✅
- [x] 活动必须提前至少一周申报
- [x] 报名截止时间必须比活动开始时间早2小时
- [x] 场地容量校验
- [x] 场地时间冲突检测

### 二、报名管理模块

#### 2.1 智能报名系统 ✅
- [x] 并发报名控制
- [x] 实时人数限制校验
- [x] 候补队列机制（名额已满自动进入候补）
- [x] 防重复报名
- [x] 报名截止时间自动熔断
- [x] 报名来源记录（PC端/移动端）

#### 2.2 我的报名中心 ✅
- [x] 查看所有报名记录
- [x] 状态展示（已报名/候补中/已签到/已取消/缺席）
- [x] 自行取消报名
- [x] 取消后自动释放名额
- [x] 候补转正通知

### 三、智能签到核验模块

#### 3.1 二维码签到 ✅
- [x] 动态二维码生成（管理员/教师端）
- [x] 二维码Token时效性（可刷新）
- [x] 扫码签到功能
- [x] 手动输入Token签到
- [x] Token有效性校验
- [x] 防重复签到

#### 3.2 人脸识别签到 ✅（接口预留）
- [x] 人脸识别签到接口
- [x] 签到方式记录（二维码/人脸/代签）
- [x] 实际AI服务接入待实现（需接入百度AI、腾讯云等）

#### 3.3 签到状态管理 ✅
- [x] 正常签到
- [x] 迟到判定（超过30分钟标记为迟到）
- [x] 精确签到时间记录
- [x] 签到状态实时更新

### 四、评价反馈模块

#### 4.1 学生评价功能 ✅
- [x] 已签到活动允许评价
- [x] 内容质量评分（1-5星）
- [x] 主讲人表现评分（1-5星）
- [x] 组织安排评分（1-5星）
- [x] 文字建议反馈
- [x] 评分范围校验

#### 4.2 评价管理 ✅
- [x] 教师查看自己活动的评分报表
- [x] 平均分统计
- [x] 评价数量统计
- [x] 敏感词过滤（基础实现）
- [x] 低分预警（可扩展）

### 五、数据可视化分析

#### 5.1 核心指标统计 ✅
- [x] 全校活动总数
- [x] 本周即将开始活动数
- [x] 累计参与人次
- [x] 我的报名记录数

#### 5.2 学科活跃度排名 ✅
- [x] 按活动类型统计参与人数
- [x] 柱状图数据接口
- [x] 学科排名展示

#### 5.3 活动类型占比 ✅
- [x] 学术讲座 vs 校园活动占比
- [x] 环形图数据接口
- [x] 比例分析

#### 5.4 活动热度趋势 ✅
- [x] 最近7天活动创建趋势
- [x] 折线图数据接口

#### 5.5 参与热力图 ✅
- [x] 按时间段统计参与人数
- [x] 日期范围查询
- [x] 热力图数据接口

#### 5.6 反馈趋势统计 ✅
- [x] 按周统计评价数量
- [x] 平均分趋势
- [x] 反馈趋势图数据接口

#### 5.7 扩展统计维度 ✅
- [x] 活动状态分布（草稿/已发布/已结束）
- [x] 热门活动Top5（按报名人数）
- [x] 签到方式统计（二维码/人脸）
- [x] 迟到统计和准时率
- [x] 候补队列统计

### 六、第二课堂/学分认证模块

#### 6.1 学分规则配置 ✅
- [x] 按活动类型配置学分值
- [x] 学术讲座默认0.5分
- [x] 校园活动默认0.3分
- [x] 竞赛默认2.0分
- [x] 规则启用/停用管理

#### 6.2 自动发放学分 ✅
- [x] 活动结束后自动发放
- [x] 仅对已签到用户发放
- [x] 防重复发放
- [x] 证书编号生成

#### 6.3 学分查询 ✅
- [x] 我的总学分查询
- [x] 学分记录列表
- [x] 学分排行榜
- [x] 学分发放时间记录

### 七、场地资源管理模块

#### 7.1 场地管理 ✅
- [x] 场地列表（报告厅、教室等）
- [x] 场地信息（名称、位置、容纳人数）
- [x] 设施描述（投影仪、音响等）
- [x] 场地状态管理（正常/停用）

#### 7.2 预约冲突检测 ✅
- [x] 时间段冲突检测
- [x] 发布活动时自动检测
- [x] 冲突提示信息
- [x] 场地容量校验

#### 7.3 场地查询 ✅
- [x] 所有可用场地列表
- [x] 场地下拉选择
- [x] 场地详情查询

### 八、消息通知中心

#### 8.1 系统通知 ✅
- [x] 报名成功通知
- [x] 候补转正通知
- [x] 活动提醒（2小时前、1小时前）
- [x] 变更预警通知
- [x] 问卷推送通知

#### 8.2 站内信功能 ✅
- [x] 消息列表查询
- [x] 已读/未读状态
- [x] 标记已读
- [x] 全部已读
- [x] 消息发送时间记录

#### 8.3 自动化通知 ✅
- [x] 报名成功后自动发送
- [x] 候补转正自动通知
- [x] 定时任务发送活动提醒
- [x] 消息类型分类

### 九、讲座归档与回放模块

#### 9.1 资料上传 ✅
- [x] PPT文件上传
- [x] 视频链接设置（支持外部链接）
- [x] 精彩瞬间照片上传（多张）
- [x] 文件存储管理

#### 9.2 资料下载 ✅
- [x] PPT下载功能
- [x] 下载次数统计
- [x] 观看次数统计

#### 9.3 活动总结 ✅
- [x] 活动总结编辑
- [x] 归档信息管理

### 十、定时任务系统

#### 10.1 活动状态管理 ✅
- [x] 自动结束活动（结束时间到达）
- [x] 自动归档过期活动（结束超过3天）

#### 10.2 自动化通知 ✅
- [x] 活动开始前2小时提醒
- [x] 活动开始前1小时提醒
- [x] 定时任务执行

#### 10.3 自动发放学分 ✅
- [x] 活动结束后自动发放学分
- [x] 定时任务执行

## 📊 API接口清单

### 活动管理
- `GET /biz/activity/list` - 查询活动列表
- `POST /biz/activity` - 新增活动
- `PUT /biz/activity` - 修改活动
- `DELETE /biz/activity/{ids}` - 删除活动
- `GET /biz/activity/{id}` - 获取活动详情
- `GET /biz/activity/qrcode/{id}` - 生成签到二维码
- `GET /biz/activity/statistics` - 获取统计数据
- `GET /biz/activity/heatmap` - 获取参与热力图数据
- `GET /biz/activity/feedback/trend` - 获取反馈趋势统计
- `PUT /biz/activity/audit` - 审核活动
- `PUT /biz/activity/archive/{activityId}` - 下架活动
- `GET /biz/activity/index-data` - 获取首页数据

### 报名管理
- `GET /biz/registration/list` - 查询报名记录列表
- `POST /biz/registration/apply` - 学生报名
- `POST /biz/registration/checkin` - 扫码签到
- `POST /biz/registration/checkin/face` - 人脸识别签到
- `POST /biz/registration/feedback` - 提交评价
- `POST /biz/registration/cancel/{regId}` - 取消报名
- `GET /biz/registration/feedback/stats/{activityId}` - 获取评价统计

### 学分管理
- `GET /biz/credit/list` - 查询学分记录列表
- `GET /biz/credit/myTotal` - 获取我的总学分
- `GET /biz/credit/ranking` - 获取学分排行榜
- `POST /biz/credit/grant/{activityId}` - 手动发放学分

### 场地管理
- `GET /biz/venue/list` - 查询场地列表
- `GET /biz/venue/listAll` - 获取所有可用场地
- `POST /biz/venue` - 新增场地
- `PUT /biz/venue` - 修改场地
- `DELETE /biz/venue/{ids}` - 删除场地

### 消息通知
- `GET /biz/message/list` - 查询消息列表
- `PUT /biz/message/read/{id}` - 标记已读
- `PUT /biz/message/readAll` - 全部已读

### 活动归档
- `GET /biz/archive/{activityId}` - 获取归档信息
- `POST /biz/archive` - 创建或更新归档
- `POST /biz/archive/upload/ppt` - 上传PPT
- `POST /biz/archive/video` - 设置视频链接
- `POST /biz/archive/upload/photos` - 上传照片
- `GET /biz/archive/download/ppt/{archiveId}` - 下载PPT

## 🔧 技术实现

### 后端架构
- Spring Boot 2.5.15
- MyBatis-Plus 3.5.3.1（新模块）
- PageHelper（旧模块兼容）
- Spring Security + 若依RBAC
- MySQL数据库

### 数据库表
1. `biz_activity` - 活动信息表
2. `biz_registration` - 报名签到反馈表
3. `biz_notification` - 通知记录表
4. `biz_venue` - 场地资源表
5. `biz_credit` - 学分认证表
6. `biz_credit_rule` - 学分规则表
7. `biz_activity_archive` - 活动归档表

### 定时任务
- `autoFinishActivity()` - 自动结束活动
- `remindUser()` - 活动开始前提醒
- `autoArchiveActivity()` - 自动归档过期活动
- `autoGrantCredits()` - 自动发放学分

## 📝 待完善功能（可选）

1. **人脸识别AI服务接入** - 需要接入实际的人脸识别服务
2. **电子证书PDF生成** - 使用iText或Apache PDFBox生成证书
3. **邮件通知** - 扩展通知渠道
4. **微信小程序端** - 移动端应用
5. **GPS定位签到** - 基于地理位置的签到验证
6. **前端页面开发** - Vue页面和路由配置

## ✨ 系统特色

1. **全流程闭环** - 从申报到归档的完整流程
2. **智能自动化** - 定时任务自动处理状态、通知、学分
3. **数据可视化** - 多维度统计分析
4. **混合架构** - MyBatis-Plus + PageHelper双模共存
5. **权限控制** - 基于若依RBAC的细粒度权限管理
6. **业务规则完善** - 时间校验、冲突检测、容量控制

